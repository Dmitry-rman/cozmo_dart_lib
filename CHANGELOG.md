# Changelog - Cozmo Dart Client

## [3.3.0] - 2026-01-09

### ‚ö° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∞—É–¥–∏–æ! (–∏–∑—É—á–µ–Ω–æ –∏–∑ pycozmo)

#### ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–æ–≥–æ –∑–≤—É–∫–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê—É–¥–∏–æ –±—ã–ª–æ –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–º ("–±—É–ª—å–∫–∞–ª–æ", "—Ä–µ–∂–µ—Ç—Å—è") –∏–∑-–∑–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤.

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ú—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç–æ—á–Ω—ã–π —Ç–∞–π–º–∏–Ω–≥ (33.7–º—Å –º–µ–∂–¥—É –ø–∞–∫–µ—Ç–∞–º–∏), —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –±—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ –≤ Dart event loop.

**–†–µ—à–µ–Ω–∏–µ –æ—Ç pycozmo:** "Audio Takeover" pattern
- ‚úÖ **Fast sending** - –ø–∞–∫–µ—Ç—ã —à–ª—é—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ –≤ –æ—á–µ—Ä–µ–¥—å
- ‚úÖ **No app-level timing** - —Ç–∞–π–º–∏–Ω–≥ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —Å–µ—Ç–µ–≤—ã–º —Å–ª–æ–µ–º (5ms ticker)
- ‚úÖ **Backpressure only** - –∂–¥–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ—á–µ—Ä–µ–¥—å > 100
- ‚úÖ **Screen stays on** - DisplayImage –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è –∞—É–¥–∏–æ

**–î–æ (–ü–õ–û–•–û):**
```dart
final targetTime = startTime + ((i + 1) * packetDurationUs);
await Future.delayed(Duration(microseconds: targetTime - now));
// –ë—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª—ã—à–∫–æ –≤ Dart!
```

**–ü–æ—Å–ª–µ (–•–û–†–û–®–û):**
```dart
while (_client.outboundQueueLength > 100) {
  await Future.delayed(const Duration(milliseconds: 1));
}
_client.sendRawPacket(packets[i]);  // –®–ª–µ–º —Å—Ä–∞–∑—É!
```

#### ‚úÖ AnimationController - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞—É–¥–∏–æ/—ç–∫—Ä–∞–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** AnimController —à–ª–µ—Ç OutputSilence –∫–∞–∂–¥—ã–µ 33–º—Å, –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—è —Å –∞—É–¥–∏–æ.

**–†–µ—à–µ–Ω–∏–µ:** –§–ª–∞–≥ `setAudioBusy()` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º
- –ê—É–¥–∏–æ –≤—ã–∑—ã–≤–∞–µ—Ç `setAudioBusy(true)` ‚Üí –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∑–∞–º–æ–ª–∫–∞–µ—Ç
- –ê—É–¥–∏–æ –≤—ã–∑—ã–≤–∞–µ—Ç `setAudioBusy(false)` ‚Üí –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–Ω–æ–≤–∞ —à–ª–µ—Ç silence
- DisplayImage –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è –∞—É–¥–∏–æ (—Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)

#### ‚úÖ DisplayImage - –≤—ã–≤–æ–¥ –Ω–∞ —ç–∫—Ä–∞–Ω

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ `CozmoSimpleImage` - –∫–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ `CozmoImageEncoder` - column-based RLE –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `displayImage()` - –º–µ—Ç–æ–¥ –¥–ª—è –≤—ã–≤–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
- ‚úÖ `createEyes()` - –ø—Ä–µ—Å–µ—Ç —Å –≥–ª–∞–∑–∞–º–∏ –∏ —É–ª—ã–±–∫–æ–π

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:** OutputSilence (0x8f) –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è **–î–û** DisplayImage!

#### üìö –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ò–∑—É—á–µ–Ω–æ –∏–∑ pycozmo:**
- [conn.py](https://github.com/zayfod/pycozmo/blob/master/pycozmo/conn.py) - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤–æ–≥–æ —Å–ª–æ—è
- SendThread: `COLLECT_INTERVAL = 1/30 / 3` (~11ms)
- –ü–∞–∫–µ—Ç—ã –∫–ª–∞–¥—É—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å –ë–ï–ó –∑–∞–¥–µ—Ä–∂–µ–∫
- –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π —Å–∞–º –±—É—Ñ–µ—Ä–∏–∑–∏—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:**
- [COZMO_DART_README.md](COZMO_DART_README.md) - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –ø—Ä–æ AnimationController
- [COZMO_DART_README.md](COZMO_DART_README.md) - –¥–æ–±–∞–≤–ª–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–æ–≥–æ –∑–≤—É–∫–∞
- [COZMO_DART_README.md](COZMO_DART_README.md) - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è DisplayImage

---

## [3.2.0] - 2026-01-08

### üé¨ –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–π!

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π

**CozmoAnimation enum** ‚Äî —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–Ω—ã 50+ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π Cozmo!
- ‚úÖ **50+ –∞–Ω–∏–º–∞—Ü–∏–π** ‚Äî wakeUp, dance, celebrate, sleep, –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ
- ‚úÖ **playAnimation()** ‚Äî –º–µ—Ç–æ–¥ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –ø–æ enum
- ‚úÖ **playAnimationByName()** ‚Äî –º–µ—Ç–æ–¥ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–∏ (—Å—Ç—Ä–æ–∫–∞)
- ‚úÖ **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ Trigger ID

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–Ω–∏–º–∞—Ü–∏–π:**
```dart
// –ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ –∏ —Å–æ–Ω
CozmoAnimation.wakeUp      // anim_launch_wakeup_01
CozmoAnimation.sleep       // anim_sleeping_01
CozmoAnimation.yawn        // anim_yawn_01

// –°—á–∞—Å—Ç—å–µ –∏ —Ä–∞–¥–æ—Å—Ç—å
CozmoAnimation.happyPounce // anim_happy_pounce_01
CozmoAnimation.excited     // anim_excited_01
CozmoAnimation.celebrate   // anim_celebrate_01
CozmoAnimation.majorWin    // anim_majorwin_01

// –¢–∞–Ω—Ü—ã –∏ –≤–µ—Å–µ–ª—å–µ
CozmoAnimation.dance       // anim_dance_01
CozmoAnimation.danceSprint // anim_dance_sprint_01
CozmoAnimation.moonwalk    // anim_moonwalk_01

// –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
CozmoAnimation.greeting    // anim_greeting_01
CozmoAnimation.yes         // anim_yes_01
CozmoAnimation.no          // anim_no_01
CozmoAnimation.love        // anim_love_01

// –ò–≥—Ä—ã
CozmoAnimation.game_win    // anim_gamewin_01
CozmoAnimation.game_lose   // anim_gamelose_01

// –ò 40+ –¥—Ä—É–≥–∏—Ö –∞–Ω–∏–º–∞—Ü–∏–π!
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```dart
// –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ enum
await CozmoClient.instance.playAnimation(CozmoAnimation.dance);

// –° –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º
await playAnimation(CozmoAnimation.celebrate, loops: 2);

// –ü–æ –∏–º–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞)
await playAnimationByName("anim_speedlines_01");

// –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —ç–º–æ—Ü–∏–π –∏ –∞–Ω–∏–º–∞—Ü–∏–π
await playEmotion(CozmoEmotion.happy);
await playAnimation(CozmoAnimation.dance);
```

#### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û–±–Ω–æ–≤–ª–µ–Ω–æ –≤ README:**
- ‚úÖ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 50+ –∞–Ω–∏–º–∞—Ü–∏–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `playAnimation()`
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `playAnimationByName()`
- ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ–Ω

---

## [3.1.0] - 2026-01-08

### üé≠ –≠–º–æ—Ü–∏–∏ –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ API!

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —ç–º–æ—Ü–∏–π

**CozmoEmotion enum** ‚Äî —Ç–µ–ø–µ—Ä—å Cozmo –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏!
- ‚úÖ **13 —ç–º–æ—Ü–∏–π –∏ –∞–Ω–∏–º–∞—Ü–∏–π** ‚Äî happy, sad, surprised, thinking, frustrated, scared, sleepy, dog, cat, win, lose, chatty, greeting
- ‚úÖ **playEmotion()** ‚Äî –º–µ—Ç–æ–¥ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI** ‚Äî —ç–º–æ—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞ –æ—Ç–≤–µ—Ç–∞

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–º–æ—Ü–∏–∏:**
```dart
// –û—Å–Ω–æ–≤–Ω—ã–µ —ç–º–æ—Ü–∏–∏
CozmoEmotion.happy        // –°—á–∞—Å—Ç—å–µ
CozmoEmotion.sad          // –ì—Ä—É—Å—Ç—å
CozmoEmotion.surprised    // –£–¥–∏–≤–ª–µ–Ω–∏–µ
CozmoEmotion.thinking     // –ó–∞–¥—É–º—á–∏–≤–æ—Å—Ç—å
CozmoEmotion.frustrated   // –†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ
CozmoEmotion.scared       // –ò—Å–ø—É–≥
CozmoEmotion.sleepy       // –°–æ–Ω–ª–∏–≤–æ—Å—Ç—å

// –ò–≥—Ä–æ–≤—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
CozmoEmotion.win          // –ü–æ–±–µ–¥–∞
CozmoEmotion.lose         // –ü—Ä–æ–∏–≥—Ä—ã—à

// –ñ–∏–≤–æ—Ç–Ω—ã–µ
CozmoEmotion.dog          // –°–æ–±–∞–∫–∞
CozmoEmotion.cat          // –ö–æ—à–∫–∞

// –û–±—â–µ–Ω–∏–µ
CozmoEmotion.chatty       // –ë–æ–ª—Ç–æ–≤–Ω—è
CozmoEmotion.greeting     // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```dart
// –ü—Ä–æ—Å—Ç–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
await CozmoClient.instance.playEmotion(CozmoEmotion.happy);

// –° –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ–º
await playEmotion(CozmoEmotion.win, loops: 2);

// –ë–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
await playEmotion(CozmoEmotion.thinking, wait: false);
```

#### üîß –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª

**CozmoCommand class** ‚Äî –≤—Å–µ Command ID —Ç–µ–ø–µ—Ä—å –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ!
```dart
// –ë—ã–ª–æ:
sendCommand(0x32, [...]); // –ß—Ç–æ —ç—Ç–æ –∑–∞ 0x32?

// –°—Ç–∞–ª–æ:
sendCommand(CozmoCommand.driveWheels, [...]); // –ü–æ–Ω—è—Ç–Ω–æ!
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
```dart
CozmoCommand.driveWheels          // 0x32
CozmoCommand.turnInPlace          // 0x39
CozmoCommand.setLiftHeight        // 0x36
CozmoCommand.setHeadAngle         // 0x37
CozmoCommand.stopAllMotors        // 0x3b
CozmoCommand.setVolume            // 0x64
CozmoCommand.outputAudio          // 0x8e
CozmoCommand.outputSilence        // 0x8f
CozmoCommand.endAnimation         // 0x9a
CozmoCommand.playAnimationTrigger // 0x26
CozmoCommand.robotState           // 0x25
CozmoCommand.enableRobotState     // 0x45
CozmoCommand.setCubeLights        // 0x4b
```

#### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–≠–º–æ—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ!**
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ–∂–∏–¥–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏** ‚Äî `_waitForQueueEmpty()` –º–µ—Ç–æ–¥
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `playEmotion()`** ‚Äî —Ç–µ–ø–µ—Ä—å –∂–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω `_initializeRobot()`** ‚Äî –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è** ‚Äî —Ç–µ–ø–µ—Ä—å Cozmo –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏

**–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```dart
// –ë—ã–ª–æ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):
await playEmotion(CozmoEmotion.greeting); // –ö–æ–º–∞–Ω–¥–∞ —É—à–ª–∞, –Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å

// –°—Ç–∞–ª–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç):
await _waitForQueueEmpty(); // –ñ–¥–µ–º –æ—á–∏—Å—Ç–∫–∏ –æ—á–µ—Ä–µ–¥–∏
await playEmotion(CozmoEmotion.greeting); // –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
```

#### üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ README:**
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ `playEmotion()`
- ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–º–æ—Ü–∏–π
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenAI Realtime

#### üéØ –ß—Ç–æ –¥–∞–ª—å—à–µ?

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI Realtime:**
- ‚úÖ –≠–º–æ—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∏–∑ —Ç–µ–∫—Å—Ç–∞ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ `thinking` —ç–º–æ—Ü–∏—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞
- ‚úÖ –≠–º–æ—Ü–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–≤–∞—É ‚Üí surprised, –º–æ–ª–æ–¥–µ—Ü ‚Üí happy)

---

## [3.0.0] - 2026-01-08

### üöÄ –†–ï–í–û–õ–Æ–¶–ò–û–ù–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê ‚Äî Reliable UDP Layer!

#### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π

**Reliable UDP (–ù–∞–¥–µ–∂–Ω—ã–π UDP)** ‚Äî —Ç–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ TCP!
- ‚úÖ **–†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è** ‚Äî –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –ø–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (RTO = 40–º—Å)
- ‚úÖ **Sliding Window** ‚Äî –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ (size = 8)
- ‚úÖ **Skip-to-Live** ‚Äî –∞—É–¥–∏–æ "–¥–æ–≥–æ–Ω—è–µ—Ç" —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –ø—Ä–∏ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–∏
- ‚úÖ **–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª (_tick)** ‚Äî –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–æ–π

#### üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```dart
// –ë—ã–ª–æ (v2.x):
await playAudio(path); // –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ü–∏–∫–ª —Å flow control

// –°—Ç–∞–ª–æ (v3.0):
_outboundQueue.add(payload); // –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è –æ—á–µ—Ä–µ–¥—å
_tick(Timer) ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ
```

**–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **`_SentPacket`** ‚Äî –∫–ª–∞—Å—Å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
2. **`_inflightPackets`** ‚Äî Map –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
3. **`_outboundQueue`** ‚Äî –æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
4. **`_tick(Timer)`** ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª (10–º—Å)

#### üî¨ –ê–ª–≥–æ—Ä–∏—Ç–º Reliable UDP

```dart
void _tick(Timer timer) {
  // 1. –£–¥–∞–ª–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω–æ–µ (rob –ø—Ä–∏—Å–ª–∞–ª ack)
  _inflightPackets.removeWhere((seq, pkt) => seq <= _lastRemoteAck);

  // 2. –†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è (> 40–º—Å –±–µ–∑ ACK)
  for (var pkt in _inflightPackets.values) {
    if (now.difference(pkt.lastSentTime).inMilliseconds > _RTO_MS) {
      _sendRaw(pkt.frameData); // –ü–µ—Ä–µ–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
      pkt.retries++;
    }
  }

  // 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ (–µ—Å–ª–∏ –æ–∫–Ω–æ < 8)
  while (_inflightPackets.length < _WINDOW_SIZE && _outboundQueue.isNotEmpty) {
    _sendReliableFrame(_outboundQueue.removeFirst());
  }

  // 4. Keep-Alive (PING –∫–∞–∂–¥—ã–µ 1 —Å–µ–∫)
  if (now.difference(_lastSendTime) > 1000) {
    _sendPing();
  }
}
```

#### üéµ Skip-to-Live Algorithm

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–ª–æ—Ö–æ–º Wi-Fi –∞—É–¥–∏–æ –æ—Ç—Å—Ç–∞–≤–∞–ª–æ ‚Üí –Ω–∞–∫–∞–ø–ª–∏–≤–∞–ª–æ—Å—å ‚Üí —Ä–≤–∞–ª–æ—Å—å.

**–†–µ—à–µ–Ω–∏–µ:** –ï—Å–ª–∏ –æ—Ç—Å—Ç–∞–≤–∞–Ω–∏–µ > 66–º—Å (2 —Ñ—Ä–µ–π–º–∞) ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–∞–∫–µ—Ç—ã:
```dart
if (targetTime - now < -66000) {
  // –û–ø–∞–∑–¥—ã–≤–∞–µ–º –Ω–∞ 2+ —Ñ—Ä–µ–π–º–∞ ‚Üí –ü–†–û–ü–£–°–ö–ê–ï–ú
  skippedCount++;
  continue; // –ù–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–≤—É–∫ –º–æ–∂–µ—Ç "–ø—Ä–µ—Ä—ã–≤–∞—Ç—å—Å—è", –Ω–æ **—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ù–ï —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è**!

#### üìä –ù–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | v2.0 | v3.0 | –ü–æ—á–µ–º—É |
|----------|------|------|--------|
| **Window Size** | 16 | 8 | –ú–µ–Ω—å—à–µ –∑–∞–¥–µ—Ä–∂–∫–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∞—É–¥–∏–æ |
| **RTO** | N/A | 40–º—Å | –ë—ã—Å—Ç—Ä–∞—è —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è (< 33.7–º—Å –ø–∞–∫–µ—Ç–∞) |
| **Tick Rate** | N/A | 10–º—Å | –ß–∞—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ timeout |
| **Queue Limit** | N/A | 200 | –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è |

#### ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞–Ω–∏—è (–¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ README)

**–ü—Ä–∏—Ä–æ–¥–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:**
- Cozmo –∏—Å–ø–æ–ª—å–∑—É–µ—Ç UDP, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç TCP –ø–æ–≤–µ–¥–µ–Ω–∏—è
- –°—Ç—Ä–æ–≥–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ø–∞–∫–µ—Ç 3 –í–´–ë–†–ê–°–´–í–ê–ï–¢–°–Ø –µ—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–Ω –ø–∞–∫–µ—Ç 2
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è: –±–µ–∑ –Ω–µ—ë –ª—é–±–æ–π –ª–∞–≥ Wi-Fi —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞—É–¥–∏–æ:**
- Window Size: **32-48** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏)
- RTO: **20-30–º—Å** (–±—ã—Å—Ç—Ä–µ–µ —á–µ–º 33.7–º—Å –ø–∞–∫–µ—Ç)
- Command ID: **0x8e** (OutputAudio) ‚Äî "–≥–æ–ª—ã–µ" u-law –¥–∞–Ω–Ω—ã–µ –∫—Ä–∞—à–∞—Ç —Ä–æ–±–æ—Ç–∞

**Flow Control:**
- –ù–µ–ª—å–∑—è –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É PING –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ ACK (deadlock!)
- PING (0x0b) –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –í–°–ï–ì–î–ê, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–∫–Ω–∞
- ENGINE (0x07) –í–°–ï–ì–î–ê —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ (–ø—É—Å—Ç—ã–µ —Ñ—Ä–µ–π–º—ã = –æ—à–∏–±–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)

#### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ **Stable connection** ‚Äî —Ä–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ **Smooth audio** ‚Äî –æ–∫–Ω–æ 32-48 —Å–≥–ª–∞–∂–∏–≤–∞–µ—Ç Wi-Fi –ª–∞–≥–∏
- ‚úÖ **No disconnects** ‚Äî PING keep-alive –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–≤—è–∑—å
- ‚úÖ **Skip-to-Live** ‚Äî –∞—É–¥–∏–æ "–¥–æ–≥–æ–Ω—è–µ—Ç" —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- ‚úÖ **Production ready** ‚Äî –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

#### üéØ Production Ready! üöÄ

–¢–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Reliable UDP:
- ‚úÖ –†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ Sliding Window –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–º
- ‚úÖ Skip-to-Live –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ PING Keep-Alive (–Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç seq)
- ‚úÖ Deadlock-free –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

---

## [2.0.0] - 2026-01-07

### üéâ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ‚Äî Flow Control –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –∞—É–¥–∏–æ!

#### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**Flow Control (–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ—Ç–æ–∫–∞)** ‚Äî —Ç–µ–ø–µ—Ä—å —Ä–æ–±–æ—Ç –ù–ï "—Ç–µ—Ä—è–µ—Ç—Å—è" –ø—Ä–∏ –∞—É–¥–∏–æ! üéµ

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ –∞—É–¥–∏–æ (~30 –ø–∞–∫–µ—Ç–æ–≤/—Å–µ–∫) —Ä–æ–±–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–≤–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å –∏ —Ä–∞–∑—Ä—ã–≤–∞–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ. –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏:
```
üì¶ Frame: ROBOT (561B) seq=22 ack=22
üì¶ Frame: ROBOT (561B) seq=0 ack=0  ‚Üê –°–±—Ä–æ—Å sequence number!
üì¶ Frame: ROBOT (561B) seq=0 ack=0  ‚Üê –°–ø–∞–º–∏—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏
```

**–ö–æ—Ä–µ–Ω–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–ª –ø–∞–∫–µ—Ç—ã —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é, –ù–ï –ø—Ä–æ–≤–µ—Ä—è—è ACK –æ—Ç —Ä–æ–±–æ—Ç–∞
- –†–æ–±–æ—Ç –∏–º–µ–µ—Ç –±—É—Ñ–µ—Ä –ø—Ä–∏–µ–º–∞ (sliding window) ~16-32 –ø–∞–∫–µ—Ç–æ–≤
- –ö–æ–≥–¥–∞ –æ–∫–Ω–æ –ø–µ—Ä–µ–ø–æ–ª–Ω—è–ª–æ—Å—å, —Ä–æ–±–æ—Ç —Å—á–∏—Ç–∞–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–±—Ä–∞—Å—ã–≤–∞–ª seq

**–†–µ—à–µ–Ω–∏–µ:**
–î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π **Flow Control** —á–µ—Ä–µ–∑ ACK –º–µ—Ö–∞–Ω–∏–∑–º:

1. **`_lastRemoteAck`** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ACK –æ—Ç —Ä–æ–±–æ—Ç–∞ (–∫–∞–∫–∏–µ –ø–∞–∫–µ—Ç—ã –æ–Ω –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª)
2. **`_getSeqDistance()`** ‚Äî –≤—ã—á–∏—Å–ª—è–µ—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –º–µ–∂–¥—É seq —Å —É—á–µ—Ç–æ–º –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è uint16
3. **`_MAX_WINDOW_SIZE = 16`** ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
4. **–¶–∏–∫–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å backpressure** ‚Äî –∂–¥–µ—Ç –µ—Å–ª–∏ –æ–∫–Ω–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ

```dart
while (_getSeqDistance(_lastRemoteAck, _seq) > _MAX_WINDOW_SIZE) {
  // –û–∫–Ω–æ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ ‚Äî –∂–¥–µ–º ACK –æ—Ç —Ä–æ–±–æ—Ç–∞
  await Future.delayed(const Duration(milliseconds: 5));
}
await _sendPacket(packets[i]);
```

#### üî¨ –ê–Ω–∞–ª–∏–∑ pycozmo

–ò–∑—É—á–µ–Ω `conn.py:SendThread`:
```python
self.window = SendWindow(16, size=62, max_seq=MAX_SEQ)
# –û–∫–Ω–æ 16 –ø–∞–∫–µ—Ç–æ–≤, –±—É—Ñ–µ—Ä 62, max_seq=0xFFFE
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å–∞–π—Ç:**
–í pycozmo –µ—Å—Ç—å `ack()` –º–µ—Ç–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç –æ–∫–Ω–æ:
```python
def ack(self, seq: int, last_ack: int) -> None:
    self.window.acknowledge(seq)
    self.last_ack = last_ack  # ‚Üê –≠—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç —Ä–æ–±–æ—Ç–∞!
```

–í –Ω–∞—à–µ–º –∫–æ–¥–µ –ø–æ–ª–µ `ack` —á–∏—Ç–∞–ª–æ—Å—å, –Ω–æ **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å**! –≠—Ç–æ –±—ã–ª–∞ –≥–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞.

#### üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
```dart
int _lastRemoteAck = 0;              // –ü–æ—Å–ª–µ–¥–Ω–∏–π ACK –æ—Ç Cozmo
static const int _MAX_WINDOW_SIZE = 16; // –†–∞–∑–º–µ—Ä –æ–∫–Ω–∞
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**
```dart
int _getSeqDistance(int ack, int seq) {
  if (seq >= ack) {
    return seq - ack;
  } else {
    // –ü–µ—Ä–µ—Ö–æ–¥ —á–µ—Ä–µ–∑ 0xFFFF
    return (0xFFFF - ack) + seq + 1;
  }
}
```

**–û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```
üì¶ Frame: ROBOT (561B) seq=22 ack=20 | –û–∫–Ω–æ: 2/16
üìä –ü—Ä–æ–≥—Ä–µ—Å—Å: 50.0% (50/100) | –û–∫–Ω–æ: 15/16
```

#### ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ Robo—Ç –ë–û–õ–¨–®–ï –ù–ï "—Ç–µ—Ä—è–µ—Ç—Å—è" –ø—Ä–∏ –∞—É–¥–∏–æ
- ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–∞–∂–µ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏
- ‚úÖ Flow control –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–ø—Ä–∞–≤–∫–∏
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ Timeout –∑–∞—â–∏—Ç–∞ (1 —Å–µ–∫—É–Ω–¥–∞) –µ—Å–ª–∏ —Ä–æ–±–æ—Ç –ø–µ—Ä–µ—Å—Ç–∞–ª –æ—Ç–≤–µ—á–∞—Ç—å

#### üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- **–°–±—Ä–æ—Å `_lastRemoteAck`** –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
- **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –≤ –∫–∞–∂–¥–æ–º –ø–∞–∫–µ—Ç–µ
- **ACK timeout** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è –µ—Å–ª–∏ —Ä–æ–±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

#### üéØ Production Ready! üöÄ

–¢–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç pycozmo –ø—Ä–æ—Ç–æ–∫–æ–ª—É:
- ‚úÖ Flow control —á–µ—Ä–µ–∑ sliding window
- ‚úÖ ACK –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ Backpressure –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ–∫–Ω–∞
- ‚úÖ Stable —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞–∂–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ

---

## [1.3.0] - 2026-01-05

### üéâ PRODUCTION READY ‚Äî Cozmo Fully Controlled!

#### ‚úÖ –†–∞–±–æ—á–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

**Sequence Number Increment** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ!

- **`_seq` field** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ sequence number
- **`_seq++ increment`** ‚Äî –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–æ–±–æ—Ç —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã!

**EnableAnimationState Command** ‚Äî –≤–∫–ª—é—á–µ–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ! üîä

- **Command ID 0x9f** ‚Äî –≤–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –∞–Ω–∏–º–∞—Ü–∏–∏ Cozmo
- **–ö–†–ò–¢–ò–ß–ù–û:** –ë–µ–∑ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∞—É–¥–∏–æ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è (—Ç–∏—à–∏–Ω–∞)
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é** —Ä–æ–±–æ—Ç–∞

#### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–º

- **SetHeadAngle** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π Cozmo ‚úÖ
  - `angle = -0.436` ‚Üí –≥–æ–ª–æ–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–Ω–∏–∑ (-25¬∞)
  - `angle = 0.0` ‚Üí –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–ø—Ä—è–º–æ)
  - `angle = 0.777` ‚Üí –≥–æ–ª–æ–≤–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤–≤–µ—Ä—Ö (+44.5¬∞)
  - –ü–æ–ª–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω —É–≥–ª–æ–≤
  - –†–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º

- **SetVolume** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é ‚úÖ
  - `volume = 0..65535` (0-100%)
  - –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

- **PlayAudio** ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ WAV —Ñ–∞–π–ª–æ–≤ ‚úÖ üîä
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 16-bit PCM, 22050Hz, mono
  - u-law –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –ü—Ä–æ–≥—Ä–µ—Å—Å-–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
  - **–ó–í–£–ö –†–ê–ë–û–¢–ê–ï–¢!**

- **Connect/Disconnect** ‚Äî –Ω–∞–¥—ë–∂–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ‚úÖ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π ping (keep-alive)
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ

#### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- **–ê—É–¥–∏–æ –Ω–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–ª–æ—Å—å** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `EnableAnimationState (0x9f)`
- **–î–≤–æ–π–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç–æ–≤** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `_createAudioPacket`
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —É–≥–ª–æ–≤ –≥–æ–ª–æ–≤—ã** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–æ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

#### üîß –£–ª—É—á—à–µ–Ω–∏—è

- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ WAV —Ñ–æ—Ä–º–∞—Ç–∞** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∞–π–ª–∞
- **–û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤** ‚Äî —É–±—Ä–∞–Ω –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞–º
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** ‚Äî –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

#### üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º Cozmo:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –î–≤–∏–∂–µ–Ω–∏–µ –≥–æ–ª–æ–≤—ã (–ø–æ–ª–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω -25¬∞ ... +44.5¬∞)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç–∏
- ‚úÖ **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ —Å–æ –∑–≤—É–∫–æ–º!** üîä
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** Production Ready! üöÄ

---

## [1.2.0] - 2026-01-05

### üéâ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï ‚Äî ROBOT Frame Support

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

**ROBOT Frame Handling** ‚Äî —Ç–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç Cozmo!

- **`_handleRobotFrame()`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ ROBOT —Ñ—Ä–µ–π–º–æ–≤ (FrameType 0x09)
- **`_handleRobotEvent()`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –æ—Ç —Ä–æ–±–æ—Ç–∞ (RobotState, FaceDetection, etc.)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ–±—ã—Ç–∏–π:
  - üìä **RobotState** (0x01) ‚Äî —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–±–æ—Ç–∞ (pose, battery, head_angle, etc.)
  - üë§ **FaceDetection** (0x02) ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü
  - üéØ **ObjectDetected** (0x03) ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
  - üîã **BatteryStateChanged** (0x04) ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–∏

#### üìö –ù–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **PROTOCOL_REFERENCE.md** ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ Cozmo
  - FrameType –∏ PacketType enum'—ã
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (SetHeadAngle, OutputAudio, etc.)
  - u-law –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏–æ
  - –ü—Ä–∏–º–µ—Ä—ã –ø–∞–∫–µ—Ç–æ–≤ –≤ hex
  - –°—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã pycozmo

#### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** ROBOT —Ñ—Ä–µ–π–º—ã (0x09) –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** –í v1.1.0 –±—ã–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ ENGINE (0x07) –∏ PING (0x0b) —Ñ—Ä–µ–π–º–æ–≤. ROBOT —Ñ—Ä–µ–π–º—ã –æ—Ç Cozmo –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–∞–∫ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π Frame Type: 0x9".

**–õ–æ–≥–∏ –î–û:**
```
üì• [Recv #1] 17B –æ—Ç 172.31.1.1:5551
üì© –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π Frame Type: 0x9
üì• [Recv #2] 561B –æ—Ç 172.31.1.1:5551
üì© –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π Frame Type: 0x9
```

**–õ–æ–≥–∏ –ü–û–°–õ–ï:**
```
üì• [Recv #1] 17B –æ—Ç 172.31.1.1:5551
üì© –ö–æ–º–∞–Ω–¥–∞: 0x25 (2B)
  ‚úÖ Enable –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
üì• [Recv #2] 561B –æ—Ç 172.31.1.1:5551
ü§ñ –°–æ–±—ã—Ç–∏–µ: 0x01 (547B)
  üìä RobotState –æ–±–Ω–æ–≤–ª—ë–Ω
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ ROBOT —Ñ—Ä–µ–π–º—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –°–æ–±—ã—Ç–∏—è –æ—Ç Cozmo –ø–∞—Ä—Å—è—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–æ–±–æ—Ç–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

#### üî¨ –ê–Ω–∞–ª–∏–∑ pycozmo

–î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ pycozmo:
- **protocol_ast.py** ‚Äî FrameType, PacketType enum'—ã
- **protocol_encoder.py** ‚Äî –≤—Å–µ –∫–ª–∞—Å—Å—ã –ø–∞–∫–µ—Ç–æ–≤
- **frame.py** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—Ä–µ–π–º–æ–≤
- **conn.py** ‚Äî UDP —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- **client.py** ‚Äî high-level API
- **audio.py** ‚Äî u-law –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **robot.py** ‚Äî –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–æ–±–æ—Ç–∞

#### üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

TODO: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ RobotState —Å–æ–±—ã—Ç–∏—è

#### üîú –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ

- [ ] –ü–∞—Ä—Å–∏–Ω–≥ RobotState –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ pose, battery, head_angle
- [ ] Event callbacks (`onRobotState`, `onBatteryChanged`, etc.)
- [ ] –ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã: MoveHead, DriveWheels, SetLiftHeight
- [ ] ACK/windowing —Å–∏—Å—Ç–µ–º–∞ (–∫–∞–∫ –≤ pycozmo SendThread)
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞

---

## [1.1.0] - 2026-01-04

### üéâ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –û–ë–ù–û–í–õ–ï–ù–ò–ï ‚Äî Bi-Directional Communication

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

**UDP Receive Loop** ‚Äî —Ç–µ–ø–µ—Ä—å –∫–ª–∏–µ–Ω—Ç –ü–û–õ–ù–û–°–¢–¨–Æ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç Cozmo!

- **`_startReceiveLoop()`** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤
- **`_stopReceiveLoop()`** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏
- **`_handleIncomingPacket()`** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –≤—Ö–æ–¥—è—â–∏—Ö —Ñ—Ä–µ–π–º–æ–≤
- **`_handleEngineFrame()`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ ENGINE —Ñ—Ä–µ–π–º–æ–≤
- **`_handleCommandResponse()`** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –∫–æ–º–∞–Ω–¥
- **`_handlePingFrame()`** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ PING –æ—Ç–≤–µ—Ç–æ–≤
- **`_ByteReader`** ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —á—Ç–µ–Ω–∏—è –±–∏–Ω–∞—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### üìä –ù–æ–≤—ã–µ –ø–æ–ª—è

```dart
int _recvCount = 0;                                    // –°—á—ë—Ç—á–∏–∫ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
StreamSubscription<RawSocketEvent>? _recvSubscription; // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–∫–µ—Ç
int get recvCount => _recvCount;                       // –ü—É–±–ª–∏—á–Ω—ã–π –≥–µ—Ç—Ç–µ—Ä
```

#### üîß –ò–∑–º–µ–Ω–µ–Ω–æ

- **`connect()`** ‚Äî —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç Receive Loop
- **`disconnect()`** ‚Äî –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Receive Loop –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å–æ–∫–µ—Ç–∞
- **`getConnectionInfo()`** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `recvCount`

#### üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** Cozmo –Ω–µ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

**–ü—Ä–∏—á–∏–Ω–∞:** Dart –∫–ª–∏–µ–Ω—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –ø–∞–∫–µ—Ç—ã, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –∏—Ö –Ω–µ –ø–æ–ª—É—á–∞–ª. –ü—Ä–æ—Ç–æ–∫–æ–ª Cozmo —Ç—Ä–µ–±—É–µ—Ç –±–∏-Directional –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ ‚Äî –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∫—É, —Ç–∞–∫ –∏ –ø—Ä–∏—ë–º.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Receive Loop, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π `ReceiveThread` –≤ pycozmo. –¢–µ–ø–µ—Ä—å –≤—Å–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç Cozmo –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è, –ø–∞—Ä—Å—è—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã —Ç–µ–ø–µ—Ä—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è: `‚úÖ Enable –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω`, `‚úÖ SetHeadAngle –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω`, etc.
- ‚úÖ –í–∏–¥–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ X –ø–∞–∫–µ—Ç–æ–≤, –ø–æ–ª—É—á–µ–Ω–æ Y –ø–∞–∫–µ—Ç–æ–≤
- ‚úÖ Ping —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å pycozmo –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º

#### üìù –õ–æ–≥–∏

**–î–æ (v1.0.0):**
```
üì§ [Packet #1] RESET frame –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω 14 –±–∞–π—Ç
üì§ [Packet #2] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 32 –±–∞–π—Ç –≤ 172.31.1.1:5551
üì§ [Packet #3] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ 15 –±–∞–π—Ç –≤ 172.31.1.1:5551
```
‚ùå –ù–∏–∫–∞–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Cozmo ‚Äî —Å–≤—è–∑—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–ü–æ—Å–ª–µ (v1.1.0):**
```
üì• –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤...
‚úÖ –¶–∏–∫–ª –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–ø—É—â–µ–Ω
üì§ [Packet #1] RESET frame –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω 14 –±–∞–π—Ç
üì• [Recv #1] 17B –æ—Ç 172.31.1.1:5551
üì© –ö–æ–º–∞–Ω–¥–∞: 0x25 (2B)
  ‚úÖ Enable –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
üì• [Recv #2] 32B –æ—Ç 172.31.1.1:5551
üì© –ö–æ–º–∞–Ω–¥–∞: 0x45 (25B)
  ‚úÖ SetOrigin –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
üì• [Recv #3] 15B –æ—Ç 172.31.1.1:5551
üì© –ö–æ–º–∞–Ω–¥–∞: 0x64 (2B)
  ‚úÖ SetVolume –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
```
‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –±–∏-Directional —Å–≤—è–∑—å!

---

## [1.0.0] - 2026-01-03

### üéØ –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ

- **UDP –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è** —Å Cozmo –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É pycozmo
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ** ‚Äî `connect()`, `disconnect()`
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ** ‚Äî `playAudio()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π WAV (16-bit PCM, 22.05kHz, mono)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä–æ–º–∫–æ—Å—Ç—å—é** ‚Äî `setVolume()` (0-100%)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π** ‚Äî `setHeadAngle()` (0.0-0.68 —Ä–∞–¥)
- **Ping —Ç–∞–π–º–µ—Ä** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π keep-alive –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- **WAV –ø–∞—Ä—Å–∏–Ω–≥** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã—Ö
- **u-law –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è 16-bit PCM –≤ 8-bit u-law
- **Packet framing** ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—Ä–µ–π–º–æ–≤ (FRAME_ID, FrameType, Seq, Ack)
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ–±–æ—Ç–∞** ‚Äî Enable (x2), SetOrigin, SyncTime
- **TopLevel API** ‚Äî —É–¥–æ–±–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–Ω–µ –∫–ª–∞—Å—Å–∞
- **Singleton –ø–∞—Ç—Ç–µ—Ä–Ω** ‚Äî –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∏–µ–Ω—Ç–∞
- **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** ‚Äî `getConnectionInfo()`, —Å—á—ë—Ç—á–∏–∫ –ø–∞–∫–µ—Ç–æ–≤

#### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `COZMO_DART_README.md` ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ñ–∞–π–ª–µ `cozmo_dart.dart`
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏–∏ –∫ –∫–æ–¥—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

#### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **–ö–†–ò–¢–ò–ß–ù–û:** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç Receive Loop ‚Äî –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç Cozmo
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, –Ω–æ Cozmo –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç

---

## –°—Ç–∞—Ç—É—Å –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞       | –°—Ç–∞—Ç—É—Å          | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å |
|--------|------------|-----------------|--------------|
| 3.2.0  | 2026-01-08 | ‚úÖ –¢–µ–∫—É—â–∞—è       | Production   |
| 3.1.0  | 2026-01-08 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 3.0.0  | 2026-01-08 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 2.0.0  | 2026-01-07 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 1.3.0  | 2026-01-05 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 1.2.0  | 2026-01-05 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 1.1.0  | 2026-01-04 | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è    | Production   |
| 1.0.0  | 2026-01-03 | ‚ö†Ô∏è –£—Å—Ç–∞—Ä–µ–≤—à–∞—è   | –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|

---

## –ü–ª–∞–Ω—ã –Ω–∞ –±—É–¥—É—â–µ–µ (v3.3.0+)

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- [x] ~~ACK/windowing —Å–∏—Å—Ç–µ–º–∞ (–∫–∞–∫ –≤ pycozmo SendThread)~~ ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ v2.0.0!
- [x] ~~–†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤~~ ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ v3.0.0!
- [x] ~~Sliding Window —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø–æ—Ç–æ–∫–∞~~ ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ v3.0.0!
- [ ] Packet reordering –¥–ª—è UDP reliability (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π RTO (–Ω–∞ –æ—Å–Ω–æ–≤–µ RTT measurements)
- [ ] Event callbacks (`onRobotFound`, `onBatteryChanged`, etc.)
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ pycozmo
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- [ ] –ü—Ä–∏–º–µ—Ä Flutter –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å UI

### –¢–µ–∫—É—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:

> **v3.2.0 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞:**
> - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∏–º–∞—Ü–∏–π (50+ –∞–Ω–∏–º–∞—Ü–∏–π)
> - ‚úÖ –°–∏—Å—Ç–µ–º–∞ —ç–º–æ—Ü–∏–π (13 —ç–º–æ—Ü–∏–π)
> - ‚úÖ –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–º–∞–Ω–¥ (CozmoCommand)
> - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI Realtime
> - ‚úÖ Reliable UDP Layer –∏–∑ v3.0.0
> - ‚úÖ –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ
> - ‚úÖ –†–µ—Ç—Ä–∞–Ω—Å–º–∏—Å—Å–∏—è –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
> - ‚úÖ Skip-to-Live –∞–ª–≥–æ—Ä–∏—Ç–º
> - ‚úÖ Sliding Window (size = 8)
> - ‚úÖ PING Keep-Alive
> - ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π, –ø–æ–¥—ä—ë–º–Ω–∏–∫–æ–º, –∫–æ–ª–µ—Å–∞–º–∏
> - ‚úÖ Deadlock-free –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
>
> **Production Ready!** üöÄüé¨

---

## Migration Guide

### –° v3.1.0 –Ω–∞ v3.2.0

**–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:** API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è! –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```dart
// –ö–æ–¥ v3.1.0 —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ v3.2.0
await playEmotion(CozmoEmotion.happy);
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

```dart
// –ê–Ω–∏–º–∞—Ü–∏–∏ (–Ω–æ–≤–æ–µ –≤ v3.2.0)
await playAnimation(CozmoAnimation.dance);
await playAnimation(CozmoAnimation.celebrate, loops: 2);

// –ü–æ –∏–º–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏
await playAnimationByName("anim_speedlines_01");

// –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —ç–º–æ—Ü–∏–π –∏ –∞–Ω–∏–º–∞—Ü–∏–π
await playEmotion(CozmoEmotion.happy);
await playAnimation(CozmoAnimation.dance);
```

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∞–Ω–∏–º–∞—Ü–∏–π –¥–æ—Å—Ç—É–ø–µ–Ω –≤ README.**

---

### –° v3.0.0 –Ω–∞ v3.1.0

**–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:** API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è! –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```dart
// –ö–æ–¥ v3.0.0 —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ v3.1.0
await connect();
await setVolume(75);
await playAudio('/path/to/audio.wav');
```

**–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

```dart
// –≠–º–æ—Ü–∏–∏ (–Ω–æ–≤–æ–µ –≤ v3.1.0)
await CozmoClient.instance.playEmotion(CozmoEmotion.happy);

// –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (–Ω–æ–≤–æ–µ –≤ v3.1.0)
// –í–º–µ—Å—Ç–æ:
sendCommand(0x32, [...]); // –ß—Ç–æ —ç—Ç–æ?

// –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
sendCommand(CozmoCommand.driveWheels, [...]); // –ü–æ–Ω—è—Ç–Ω–æ!
```

---

## Migration Guide

### –° v1.0.0 –Ω–∞ v1.1.0

**–•–æ—Ä–æ—à–∏–µ –Ω–æ–≤–æ—Å—Ç–∏:** API –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è! –ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

```dart
// –ö–æ–¥ v1.0.0 —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ v1.1.0
final error = await connect();
if (error != null) return;

await setVolume(75);
await setHeadAngle(0.5);
await playAudio('/path/to/audio.wav');

await disconnect();
```

**–ù–æ —Ç–µ–ø–µ—Ä—å –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ:**
```
‚úÖ SetVolume –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
‚úÖ SetHeadAngle –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
‚úÖ OutputAudio –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
```

**–ù–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```dart
final info = getConnectionInfo();
print('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: ${info['packetCount']}');  // –†–∞–Ω—å—à–µ
print('–ü–æ–ª—É—á–µ–Ω–æ: ${info['recvCount']}');      // –ù–û–í–û–ï!
```

---

**–ü–æ–ª–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:** [RECEIVE_LOOP_IMPLEMENTATION.md](RECEIVE_LOOP_IMPLEMENTATION.md)
